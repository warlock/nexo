<html>
<head>
<script src="../nexo.js"></script>
</head>
<body>
  <div id="main"></div>
  <div class="main2">clickme</div>
  <div id="main3"></div>
  <div id="main4"></div>
  <script>

n.set({
  load : (n, done) => {
    done(n.model('client').get().toUpperCase())
  },
  name : "client",
  html : n => `CLIENT INFO: ${n.model('client').get()}`
})

n.set({
  name : "loaddemo",
  load : (n, render) => {
    setTimeout(() => {
      render('load: ' + n.model('loaddemo').get())
    }, 3000)
  },
  html : n => `INFO: ${n.model('loaddemo').get()}`,
  ready : n => {
    console.log(n.model('loaddemo').get())
  }
})

n.set({
  name : "loaddemo2",
  load : (n, render) => {
    setTimeout(() => {
      render('load2: ' + n.model('loaddemo2').get())
    }, 2000)
  },
  html : n => `INFO: ${n.model('loaddemo2').get()}<br>
    This is the client: ${n.render('client', { status : 'asdasd' })}
  `,
  ready : n => {
    if (n.model('loaddemo2').get() !== 'holaaas') {
      console.log('Cambiant el loaddemo2 model... i tornant a renderitzar a... main4')
      n.model('loaddemo2').set('holaaas').render('main4')
    } else console.log("No s'ha de cambiar")
  }
})


n.ready(() => {
  n.render('client', { element : '.main2', status : "holaaaa" })
  n.render('loaddemo2', { element : '#main', status : "adeu" })
})
  </script>
</body>
</html>
