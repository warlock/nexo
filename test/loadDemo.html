<html>
<head>
<script src="../nexo.js"></script>
</head>
<body>
  <div id="main"></div>
  <div class="main2">clickme</div>
  <div id="main3"></div>
  <div id="main4"></div>
  <script>

n.set({
  name : "article",
  html : n => `
  <div><strong>TITLE: ${n.model.get('article').title}</strong><br>
  ${n.get('articleContent', n.model.get('article').title)}
  </div>`
})

n.set({
  name : "articleContent",
  load : (n, render) => {
    setTimeout(() => {
      render(n.model('articleContent').toUpperCase())
    }, 2000)
  },
  html : n => `<div id="articleContent">${n.model.get('articleContent')}</div>`,
  ready : n => {
    n.on(n.id('articleContent'), 'click', () => {
      console.log(`Clicked: ${n.model.get('articleContent')}`)
    })
  }
})


n.set({
  name: 'fetchNews',
  load: (n, render) => {
    console.log(`Fetch data from url: ${data}`)
    setTimeout(() => {
      var recibedArticles = [
        { title : "Title 1", content : 'aaa'},
        { title : "Title 2", content : 'bbb'}
      ]

      render(recibedArticles)
    }, 2000)
  },
  html : n => {
    var text = `<div>LATEST NEWS(${n.model.get('fetchNews').length}):</div>`
    data.forEach(article => {
      text += `<div>${n.get('article', { status : article })}</div>`
    })
    return text
  },
  ready : (n, data) => {
    console.log(`Fetch ${data.length} articles.`)
  }
})

n.ready(() => {
  n.render('fetchNews', '#main4', 'http://url')

  n.on('.main2', 'click', () => {
    n.emit('eventTest', 'from ready function')
  })
})
  </script>
</body>
</html>
